---
title: "DID Operations"
description: "description"
---

UNiD Core supports a variety of DID operations, all of which require the DID owner to generate specific data values and cryptographic material. This page below describe how to perform each type of operation.

### Generate New DID

<!-- UNiD Core generates 3 pairs of keys: update key, recovery key, and singing key using [SECP256K1](https://w3c-ccg.github.io/lds-ecdsa-secp256k1-2019/) with ECDSA algorithm with a default setting (the signing key is used for DID user to generate signature and other keys are used for managing this DID). A public key document is generated with a json value and it will be canonicalized by [JCS](https://tools.ietf.org/id/draft-rundgren-json-canonicalization-scheme-00.html).

UNiD Core computes hash from the public key document. The hash with [Multihash](https://multiformats.io/multihash/) format and SHA2-256 (which code is 18 or 0x12) is used for generating hashes of protocol-related values. And then, it generates the base64-encoded entity including these hash values and document are submitted to [Sidetree](https://github.com/decentralized-identity/sidetree) by HTTP POST method. -->

With the SDK, you can easily generate key pairs using SECP256K1 with ECDSA algorithm and the payload required for DID register operation.

```js
import { Unid } from "@unid/react-native-unid-wallet-sdk";

var payload = Unid.createPayload();
Unid.registerDid(payload);
```

<!--
```js
import { Unid } from "@unid/react-native-unid-wallet-sdk";

var payload = Unid.createPayload({
	"method": "unid",
	"option": {
		"type": "EcdsaSecp256k1VerificationKey2019",
		"recovery": "BIP39 seed recovery phrases"
	}
});

Unid.registerDid(payload);
```
-->
<!-- You can select a DID method type, signature algorithm type, and key recovery method. -->

After a while, the queued operation will be periodically extracted and executed by [sidetree batch scheduler]() and is submitted into the underlying ledger system. If you want to know more detailed the operating principle, please refer to [the specification](https://identity.foundation/sidetree/spec/).


### Resolve DID

After the register operation is successfully processed in the underlying distributed ledger network, you can resolve the original DID. UNiD SDKs allow you to resolve a DID while verifying the authenticity of the response.

```js
import { Unid } from "@unid/react-native-unid-wallet-sdk";

Unid.getDidDocument({
	did: "did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg"
});
```

<!-- 唯一解けてないこと：holderがDID生成後にbatch処理されるまでの間、RPとAuthNすることができない。RP側で名前解決することができない。holder側のIF制御、署名から復元する。 -->

Great! Now that you've completed to create and register new DID. Next is to issue and exchange a verifiable credential. [VC Operations](./2-verifiable-credential).


### Update DID

Update DID document when adding, changing, and deleting public keys or service endpoints.

<!-- `updateDidDocument` method need `action` and `updateCommitment` properties. -->

<!-- ここはsidetreeをreferenceして書いてる。JwkなどはUNiD側で生成するなど。実装イメージはSDSのendpointが変わるなどで、mobile appのsettingsから変更してもらうなど。テナント依存のSDSのエンドポイントURLルールについて。 see : https://identity.foundation/sidetree/spec/#did-state-patches -->

To add public keys:

```js
import { Unid } from "@unid/react-native-unid-wallet-sdk";

Unid.updateDidDocument({
	did: "did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg",
	action: "add-public-keys",
	"publicKeys": [{
    	"id": "key1",
		"purposes": ["authentication"],
		"type": "EcdsaSecp256k1VerificationKey2019",
		"publicKeyJwk": {...}
	}]
});
```

To remove public keys:
```js
import { Unid } from "@unid/react-native-unid-wallet-sdk";

Unid.updateDidDocument({
	did: "did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg",
	action: "remove-public-keys",
	"ids": ["key1", "key2"]
});
```

To add services:

```js
import { Unid } from "@unid/react-native-unid-sdk";

Unid.updateDidDocument({
	did: "did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg",
	action: "add-services",
	"services": [{
		"id": "sds2",
		"type": "SecureDataStore",
		"serviceEndpoint": "https://examplePublicKey@o0.ingest.sds.unid.plus/"
	},
	{
		"id": "did-config",
		"type": "LinkedDomains",
		"serviceEndpoint": {
			"origins": ["https://foo.com", "https://bar.com"]
		}
	}]
});
```

To remove services:
```js
import { Unid } from "@unid/react-native-unid-sdk";

Unid.updateDidDocument({
	did: "did:ion:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg",
	action: "remove-services",
	"ids": ["sds1", "sds2"]
});
```

To replace:
```js
import { Unid } from "@unid/react-native-unid-sdk";

Unid.replaceDidDocument({
  "action": "replace",
  "document": {
    "publicKeys": [
      {
        "id": "key2",
        "purposes": ["authentication"],
        "type": "EcdsaSecp256k1VerificationKey2019",
        "publicKeyJwk": {...}
      }
    ],
    "services": [
      {
        "id": "sds3",
        "type": "SecureDataStore",
        "serviceEndpoint": "http://hub.my-personal-server.com"
      }
    ]
  }
});
```
