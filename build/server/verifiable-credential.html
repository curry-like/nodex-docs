<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VC Operations &mdash; UNiD Docs  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> UNiD Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/ubuntu-nodejs/README.html">Ubuntu (NodeJS)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">UNiD Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>VC Operations</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/server/verifiable-credential.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="vc-operations">
<h1>VC Operations<a class="headerlink" href="#vc-operations" title="Permalink to this headline"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline"></a></h2>
<p>On this page, we will demonstrate how to issue and verify a verifiable credential in a JSON-LD format adhering to the <a class="reference external" href="https://www.w3.org/TR/vc-data-model/">W3C VC Data Model</a>.</p>
</section>
<section id="vc-lifecycle">
<h2>VC Lifecycle<a class="headerlink" href="#vc-lifecycle" title="Permalink to this headline"></a></h2>
<p>This section provides a concrete set of simple but complete lifecycle examples of the data model expressed in one of the concrete syntaxes supported by this specification. The lifecycle of credentials and presentations in the Verifiable Credentials Ecosystem often take a common path:</p>
<ol class="arabic simple">
<li><p>Issuance of one or more verifiable credentials.</p></li>
<li><p>Storage of verifiable credentials in a secure data storage (SDS).</p></li>
<li><p>Composition of verifiable credentials into a verifiable presentation for verifiers.</p></li>
<li><p>Verification of the verifiable presentation by the verifier.</p></li>
</ol>
<p>In UNiD, there are two main methods to submit VP to a wallet holder. The first one is to submit the VP in response to a request from the holder. The second one is to storage the VP in SDS and grant access to the VP to the holder.</p>
</section>
<section id="create-new-vc">
<h2>Create New VC<a class="headerlink" href="#create-new-vc" title="Permalink to this headline"></a></h2>
<p>Here, we introduce how to create VC. When you create and issue a VC, you need to explicitly specify the credential subject’s DID. As a simple example, let’s create an <a class="reference external" href="https://github.com/getunid/unid-docs/tree/8515a1dcda076b9bea8d6e6e6b7eed90e22ae0d3/schemas/address/README.md">AddressCredentialV1</a> through the NodeJS SDK.</p>
<p>{% tabs %}
{% tab title=”TypeScript” %}</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span> <span class="nx">UNiD</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@getunid/node-wallet-sdk&#39;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// To get a issuer&#39;s DID</span>
        <span class="kd">const</span> <span class="nx">DID</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">UNiD</span><span class="p">.</span><span class="nx">loadDid</span><span class="p">({</span>
            <span class="nx">did</span><span class="o">:</span> <span class="s1">&#39;did:unid:test:EiDHnta3sppFajkzGqYm3jIe_lisi7sIq7ZqIxdzaad7fg&#39;</span>
        <span class="p">})</span>
        
        <span class="c1">// To get a credential subject&#39;s DID</span>
        <span class="kd">const</span> <span class="nx">SubjectDid</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">UNiD</span><span class="p">.</span><span class="nx">loadDid</span><span class="p">({</span>
            <span class="nx">did</span><span class="o">:</span> <span class="s1">&#39;did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg&#39;</span>
        <span class="p">})</span>

        <span class="c1">// To create AddressCredentialV1</span>
        <span class="kd">const</span> <span class="nx">AddressCredentialV1</span> <span class="o">=</span> <span class="nx">DID</span><span class="p">.</span><span class="nx">createCredential</span><span class="p">(</span>
            <span class="ow">new</span> <span class="nx">AddressCredentialV1</span><span class="p">({</span>
                <span class="s1">&#39;@id&#39;</span>  <span class="o">:</span> <span class="nx">SubjectDid</span><span class="p">.</span><span class="nx">getIdentifier</span><span class="p">(),</span>
                <span class="s1">&#39;@type&#39;</span><span class="o">:</span> <span class="s1">&#39;AddressPerson&#39;</span><span class="p">,</span>
                <span class="nx">address</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">postalCode</span>     <span class="o">:</span> <span class="s1">&#39;1500044&#39;</span><span class="p">,</span>
                    <span class="nx">addressCountry</span> <span class="o">:</span> <span class="s1">&#39;JP&#39;</span><span class="p">,</span>
                    <span class="nx">addressLocality</span><span class="o">:</span> <span class="s1">&#39;Tokyo&#39;</span><span class="p">,</span>
                    <span class="nx">addressRegion</span>  <span class="o">:</span> <span class="s1">&#39;Shibuya-ku&#39;</span><span class="p">,</span>
                    <span class="nx">streetAddress</span>  <span class="o">:</span> <span class="s1">&#39;5-5, Marumaya-cho&#39;</span>
                <span class="p">}</span>
            <span class="p">},</span> <span class="p">{</span>
                <span class="nx">issuanceDate</span>  : <span class="kt">new</span> <span class="nb">Date</span><span class="p">(),</span>
                <span class="nx">expirationDate</span>: <span class="kt">new</span> <span class="nb">Date</span><span class="p">()</span>
            <span class="p">})</span>
        <span class="p">)</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Complete creating a credential:&#39;</span><span class="p">,</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">stringfy</span><span class="p">(</span><span class="nx">AddressCredentialV1</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mf">2</span><span class="p">))</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;ERROR:&#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">})()</span>
</pre></div>
</div>
<p>{% endtab %}
{% endtabs %}</p>
<p>In UNiD network, we ensure interoperability by referring to the VC data schema defined <span class="xref myst">here</span>. If you want to generate a new type of VC schema that is not in the UNiD VC schema list, you can request it. For more information, see <a class="reference external" href="https://github.com/getunid/unid-docs/tree/8515a1dcda076b9bea8d6e6e6b7eed90e22ae0d3/tutorial/3-howtorequestvcschema/README.md">Request VC schema</a>.</p>
<p>Great! Now that you’ve completed to create a verifiable credential with JSON-LD data format. Next is to storage the credential to the UNiD SDS (Secure Data Storage).</p>
</section>
<section id="storage-vc-in-sds">
<h2>Storage VC in SDS<a class="headerlink" href="#storage-vc-in-sds" title="Permalink to this headline"></a></h2>
<p>The application server can securely access authorized SDS endpoints. The verifiable credentials are always encrypted and stored in the SDS.</p>
<p>{% tabs %}
{% tab title=”TypeScript” %}</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span> <span class="nx">UNiD</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@getunid/node-wallet-sdk&#39;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">DID</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">UNiD</span><span class="p">.</span><span class="nx">loadDid</span><span class="p">({</span>
            <span class="nx">did</span><span class="o">:</span> <span class="s1">&#39;did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg&#39;</span>
        <span class="p">})</span>
        <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">DID</span><span class="p">.</span><span class="nx">postCredential</span><span class="p">(</span><span class="nx">AddressCredentialV1</span><span class="p">)</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Complete storing the credential to SDS:&#39;</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;ERROR:&#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">})()</span>
</pre></div>
</div>
<p>{% endtab %}
{% endtabs %}</p>
<p>UNiD SDS validate every requests to see if the wallet is authorized to access the SDS and if the request has been tampered with.</p>
<p>Great! Now that you’ve completed to storage a VC to SDS. Next is to get selectively credentials stored in SDS and create a verifiable presentation.</p>
</section>
<section id="composition-of-vc-into-vp">
<h2>Composition of VC into VP<a class="headerlink" href="#composition-of-vc-into-vp" title="Permalink to this headline"></a></h2>
<p>The application server can fetch a newest record with <code class="docutils literal notranslate"><span class="pre">DID.getCredential()</span></code>. You can specify  <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">credentialSubjectDid</span></code>, <code class="docutils literal notranslate"><span class="pre">issuerDid</span></code>, and <code class="docutils literal notranslate"><span class="pre">issuance_date</span> </code>.</p>
<p>{% tabs %}
{% tab title=”TypeScript” %}</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span> <span class="nx">UNiD</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@getunid/node-wallet-sdk&#39;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">DID</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">UNiD</span><span class="p">.</span><span class="nx">loadDid</span><span class="p">({</span>
            <span class="nx">did</span><span class="o">:</span> <span class="s1">&#39;did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg&#39;</span>
        <span class="p">})</span>
        
        <span class="kd">const</span> <span class="nx">credential</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">DID</span><span class="p">.</span><span class="nx">getCredential</span><span class="p">({</span>
            <span class="kr">type</span><span class="o">:</span> <span class="s1">&#39;AddressCredentialV1&#39;</span><span class="p">,</span>
            <span class="nx">credentialSubjectDid</span><span class="o">:</span> <span class="s1">&#39;did:unid:test:holder_123456789&#39;</span><span class="p">,</span>
            <span class="nx">issuerDid</span>   <span class="o">:</span> <span class="s1">&#39;did:unid:test:issuer_12345678#keys-1&#39;</span><span class="p">,</span>
            <span class="nx">issuanceDate</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">begin</span>: <span class="kt">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">),</span>
                <span class="nx">end</span>  : <span class="kt">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;2020-12-31&#39;</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">})</span>
        
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Complete getting the latest credential from SDS:&#39;</span><span class="p">,</span> <span class="nx">credential</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;ERROR:&#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">})()</span>
</pre></div>
</div>
<p>{% endtab %}
{% endtabs %}</p>
<p>The application server can fetch all applicable credentials with <code class="docutils literal notranslate"><span class="pre">DID.getCredentials()</span></code>.  You can specify  <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">credentialSubjectDid</span></code>, <code class="docutils literal notranslate"><span class="pre">issuerDid</span></code>, <code class="docutils literal notranslate"><span class="pre">issuance_date</span></code>, <code class="docutils literal notranslate"><span class="pre">limit</span></code>, and <code class="docutils literal notranslate"><span class="pre">page</span></code>.</p>
<p>{% tabs %}
{% tab title=”TypeScript” %}</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span> <span class="nx">UNiD</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@getunid/node-wallet-sdk&#39;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">DID</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">UNiD</span><span class="p">.</span><span class="nx">loadDid</span><span class="p">({</span>
            <span class="nx">did</span><span class="o">:</span> <span class="s1">&#39;did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg&#39;</span>
        <span class="p">})</span>
        
        <span class="kd">const</span> <span class="nx">credentials</span> <span class="o">=</span> <span class="nx">DID</span><span class="p">.</span><span class="nx">getCredentials</span><span class="p">({</span>
            <span class="kr">type</span><span class="o">:</span> <span class="s1">&#39;AddressCredentialV1&#39;</span><span class="p">,</span>
            <span class="nx">credentialSubjectDid</span><span class="o">:</span> <span class="s1">&#39;did:unid:test:holder_123456789&#39;</span><span class="p">,</span>
            <span class="nx">issuerDid</span>    <span class="o">:</span> <span class="s1">&#39;did:unid:test:issuer_123456789&#39;</span><span class="p">,</span>
            <span class="nx">issuance_date</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">begin</span>: <span class="kt">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">),</span>
                <span class="nx">end</span>  : <span class="kt">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;2020-12-31&#39;</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="nx">limit</span>: <span class="kt">25</span><span class="p">,</span>
            <span class="nx">page</span> : <span class="kt">1</span>
        <span class="p">})</span>
        
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Complete getting credentials from SDS:&#39;</span><span class="p">,</span> <span class="nx">credentials</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;ERROR:&#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">})()</span>
</pre></div>
</div>
<p>{% endtab %}
{% endtabs %}</p>
<p>After getting credentials, you can package the verifiable credentials into the verifiable presentation with <code class="docutils literal notranslate"><span class="pre">DID.createPresentation()</span></code>.</p>
<p>{% tabs %}
{% tab title=”TypeScript” %}</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span> <span class="nx">UNiD</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@getunid/node-wallet-sdk&#39;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">DID</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">UNiD</span><span class="p">.</span><span class="nx">loadDid</span><span class="p">({</span>
            <span class="nx">did</span><span class="o">:</span> <span class="s1">&#39;did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg&#39;</span>
        <span class="p">})</span>
        
        <span class="kd">const</span> <span class="nx">presentation</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">DID</span><span class="p">.</span><span class="nx">createPresentation</span><span class="p">(</span><span class="nx">credentials</span><span class="p">)</span>
        
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Complete creating a presentation:&#39;</span><span class="p">,</span> <span class="nx">presentation</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;ERROR:&#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">})()</span>
</pre></div>
</div>
<p>{% endtab %}
{% endtabs %}</p>
</section>
<section id="verify-a-vp">
<h2>Verify a VP<a class="headerlink" href="#verify-a-vp" title="Permalink to this headline"></a></h2>
<p>This section describes how the application server verifies the signature of the verifiable presentation and retrieves the data. First of all, the application server verifies the signature of the received VP with <code class="docutils literal notranslate"><span class="pre">UNiD.verifyPresentation()</span></code>.</p>
<p>{% tabs %}
{% tab title=”TypeScript” %}</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span> <span class="nx">UNiD</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@getunid/node-wallet-sdk&#39;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">presentation</span> <span class="o">=</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s1">&#39;{&quot;verifiablePresentation&quot;:&quot;...&quot;, &quot;proof&quot;:&quot;...&quot;, ... }&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nx">UNiD</span><span class="p">.</span><span class="nx">isVerifiablePresentation</span><span class="p">(</span><span class="nx">presentation</span><span class="p">))</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">UNiD</span><span class="p">.</span><span class="nx">verifyPresentation</span><span class="p">(</span><span class="nx">presentation</span><span class="p">)</span>
            
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Complete validating a presentation:&#39;</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="ow">new</span> <span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Invalid input data&#39;</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;ERROR:&#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">})()</span>
</pre></div>
</div>
<p>{% endtab %}
{% endtabs %}</p>
<p>You will receive the following json object. <code class="docutils literal notranslate"><span class="pre">payload</span></code> is an array of verifiable credential, and <code class="docutils literal notranslate"><span class="pre">types</span></code> is an array of verifiable credential type. </p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">isValid</span> <span class="o">:</span> <span class="kr">boolean</span><span class="p">,</span>
    <span class="nx">metadata</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">issuer</span><span class="o">:</span> <span class="nx">string</span><span class="p">,</span>
        <span class="nx">issuanceDate</span><span class="o">:</span> <span class="nb">Date</span><span class="p">,</span>
        <span class="p">..</span>
    <span class="p">},</span>
    <span class="nx">payload</span><span class="o">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">VC</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">types</span>  <span class="o">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>By specifying the credential type, you can retrieve the verifiable credential with <code class="docutils literal notranslate"><span class="pre">(schema_type).select()</span></code>. You can verify the signature of the retrieved verifiable credential with <code class="docutils literal notranslate"><span class="pre">UNiD.verifyCredential()</span></code>.</p>
<p>{% tabs %}
{% tab title=”TypeScript” %}</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span> <span class="nx">UNiD</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@getunid/node-wallet-sdk&#39;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">vc</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">AddressCredentialV1</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">payload</span><span class="p">)</span>
        
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Complete retrieving a credential:&#39;</span><span class="p">,</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">stringfy</span><span class="p">(</span><span class="nx">vc</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mf">2</span><span class="p">))</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nx">UNiD</span><span class="p">.</span><span class="nx">isVerifiableCredential</span><span class="p">(</span><span class="nx">vc</span><span class="p">))</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">UNiD</span><span class="p">.</span><span class="nx">verifyCredential</span><span class="p">(</span><span class="nx">vc</span><span class="p">)</span>
            
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Complete verifying a credential:&#39;</span><span class="p">,</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">stringfy</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mf">2</span><span class="p">))</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="ow">new</span> <span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Invalid input data&#39;</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;ERROR:&#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">})()</span>
</pre></div>
</div>
<p>{% endtab %}
{% endtabs %}</p>
<p>You will receive the following json object.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">isValid</span> <span class="o">:</span> <span class="kr">boolean</span><span class="p">,</span>
    <span class="nx">metadata</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">issuer</span><span class="o">:</span> <span class="nx">string</span><span class="p">,</span>
        <span class="nx">issuanceDate</span><span class="o">:</span> <span class="nb">Date</span><span class="p">,</span>
        <span class="p">..</span>
    <span class="p">},</span>
    <span class="nx">payload</span><span class="o">:</span> <span class="nx">VC</span>
<span class="p">}</span>

<span class="c1">// For example, get addressCountry from AddressCredentialV1</span>
<span class="c1">// console.log(result.payload.address.addressCountry)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, UNiD Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>